#pragma once

#include "strings.h"
#include "terminal.h"

/*  
   _________________________________________________________________________
   ::[START]                                   ::[IvyBit 2021 - UCNC v. 1.0]

   ______/\/\/\/\__________________________/\/\/\/\/\____/\/\______/\/\_____      
   _______/\/\____/\/\__/\/\__/\/\__/\/\__/\/\____/\/\__________/\/\/\/\/\__ 
   ______/\/\____/\/\__/\/\__/\/\__/\/\__/\/\/\/\/\____/\/\______/\/\_______  
   _____/\/\______/\/\/\______/\/\/\/\__/\/\____/\/\__/\/\______/\/_________   
   __/\/\/\/\______/\____________/\/\__/\/\/\/\/\____/\/\/\____/\/\/\_______    
   _______________________/\/\/\/\__________________________________________     
                                                                         
   ::[MENU]
   ::[INFO] : 1 - Show System Informations
   ::[EDIT] : 2 - Enter Editor Mode
   ::[HELP] : 3 - Show Help
   ::[EXIT] : 4 - Exit And Run

   ::[?] : hel_

   _________________________________________________________________________
   ::[EDIT]                                    ::[IvyBit 2021 - UCNC v. 1.0]
   
   ______/\/\/\/\__________________________/\/\/\/\/\____/\/\______/\/\_____      
   _______/\/\____/\/\__/\/\__/\/\__/\/\__/\/\____/\/\__________/\/\/\/\/\__ 
   ______/\/\____/\/\__/\/\__/\/\__/\/\__/\/\/\/\/\____/\/\______/\/\_______  
   _____/\/\______/\/\/\______/\/\/\/\__/\/\____/\/\__/\/\______/\/_________   
   __/\/\/\/\______/\____________/\/\__/\/\/\/\/\____/\/\/\____/\/\/\_______    
   _______________________/\/\/\/\__________________________________________
   
   ::[MENU]
   ::[MODIFY] : 2 - Load And Modify Pin Expression
   ::[TEST]   : 3 - Run Expression
   ::[INPUTS] : 4 - Configure Inputs
   ::[PRINT]  : 5 - Print Truth Table
   ::[EXIT]   : 0 - Back To Previous Menu


   ::[?] : 1_
   
   
   _________________________________________________________________________
   ::[MODIFY]                                  ::[IvyBit 2021 - UCNC v. 1.0]
   
   ______/\/\/\/\__________________________/\/\/\/\/\____/\/\______/\/\_____      
   _______/\/\____/\/\__/\/\__/\/\__/\/\__/\/\____/\/\__________/\/\/\/\/\__ 
   ______/\/\____/\/\__/\/\__/\/\__/\/\__/\/\/\/\/\____/\/\______/\/\_______  
   _____/\/\______/\/\/\______/\/\/\/\__/\/\____/\/\__/\/\______/\/_________   
   __/\/\/\/\______/\____________/\/\__/\/\/\/\/\____/\/\/\____/\/\/\_______    
   _______________________/\/\/\/\__________________________________________
   
   ::[MENU]
   ::[OUTPUT A-H] : AH - Select Output 
   ::[HELP]       :  1 - Show Help
   ::[EXIT]       :  0 - Back To Previous Menu

   ::[OUTPUT?] : A_

   ::[EXPRESSION?] : ($A & $B & $C)_
   ::[ERROR] : ...
   ::[OK] : ...
   ::[SET EXPRESSION A]




   
   _________________________________________________________________________                                                                                  
   ::[INFO]                                    ::[IvyBit 2021 - UCNC v. 1.0]

   ::[MEMORY]   
   ::[###############################[66%]###############__________________]   
   ::[Total] :  1024 Bytes    ::[Used] :   687 Bytes  ::[Free] :   337 Bytes  
   ::[A] : 12 Bytes   ::[B] : 12 Bytes   ::[C] : 12 Bytes   ::[D] : 12 Bytes
   ::[E] : 12 Bytes   ::[F] : 12 Bytes   ::[G] : 12 Bytes   ::[H] : 12 Bytes

   ::[PIN CONFIG]
   ::[A] : $A | $B
   ::[B] : ~$A & $E
   ::[C] : (~$A & $B) || ($A & ~$B)
   ::[D] : $G = $F
   ::[E] : (~$A & $E) ~= $E
   ::[F] : ~$E
   ::[G] : ~$F
   ::[H] : $A | $B | $C | $D | $E | $F | $G | $H...                           

   ::[MENU]
   ::[HELP] : 1 - Show Help
   ::[EXIT] : 0 - Back To Previous Menu

   ::[?] : _|
*/





#define ROWS2D(D2) ((avr_size_t)(sizeof(D2) / sizeof(D2[0])))
#define COLS2D(D2) ((avr_size_t)(sizeof(D2[0])))
/*
_________/\/\/\/\__________________________/\/\/\/\/\____/\/\______/\/\_________
__________/\/\____/\/\__/\/\__/\/\__/\/\__/\/\____/\/\__________/\/\/\/\/\______
_________/\/\____/\/\__/\/\__/\/\__/\/\__/\/\/\/\/\____/\/\______/\/\___________
________/\/\______/\/\/\______/\/\/\/\__/\/\____/\/\__/\/\______/\/_____________
_____/\/\/\/\______/\____________/\/\__/\/\/\/\/\____/\/\/\____/\/\/\___________
__________________________/\/\/\/\______________________________________________
*/
const char BANNER[6][81] PROGMEM =
{
	{0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x00 },
	{0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x00 },
	{0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x00 },
	{0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x00 },
	{0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x00 },
	{0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x2F, 0x5C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x00 }
};

void print_banner(){
	
					
	term::write_string_P(PSTR("\x1b[90m"));
	for (avr_size_t r = 0; r < ROWS2D(BANNER); r++)
	{
		bool highlight = false;
		for (avr_size_t c = 0; c < COLS2D(BANNER); c++)
		{
			char chr = pgm_read_byte(&BANNER[r][c]);
			if(!highlight && chr == '/'){
				term::write_string_P(PSTR("\x1B[33m"));
				highlight = true;
			} else if(highlight && chr == '_') {				
				term::write_string_P(PSTR("\x1b[90m"));
				highlight = false;
			}
			term::write_char(chr);
		}
		term::write_string("\r\n");
	}
	term::write_string_P(PSTR("\x1b[0m"));
}








enum class RootMenuState : uint8_t{
	START,
	STATUS,
	INPUT,
	OUTPUT,
	SAVE,
	RESTORE,
	HELP,
	HARDRESET,
	EXIT
};

enum class EditMenuState : uint8_t{
	START,
	EXIT
};








